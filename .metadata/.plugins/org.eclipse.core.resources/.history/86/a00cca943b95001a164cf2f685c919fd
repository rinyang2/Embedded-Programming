#include "FreeRTOS.h"
#include "glob_def.h"
#include "emp_type.h"
#include "tm4c123gh6pm.h"
#include "string.h"
#include "file.h"
#include "lcd.h"
#include "key.h"
#include "ui.h"
#include "scale.h"
#include "semphr.h"
#include "adc.h"
#include "digiswitch.h"

void ui_task(void *pvParameters)
{
    INT8U temp =0;
    while(1){
        INT8U key = 0;
        key = get_keyboard();
        gfprintf(COM2, "%c%cCASH:1 CARD:2", 0x1B, 0x80);
        if(key=='1'){
            gfprintf(COM2, "%c%cINSERT CASH", 0x1B, 0xA8);
            driver();
        }
        else if(key=='2'){
                switch(temp){
                    case 0:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            temp++;
                        }
                        break;
                    case 1:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 2:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 3:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 4:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 5:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 6:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 7:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                    case 8:
                        key = get_keyboard();                                       // we get a value from the keyboard
                        if( key >= '0' && key <= '9')                               // if it's a number between 0 and 9 we save that value in scale_tmp and go to the next state
                        {
                            gfprintf(COM2, "%c%c%c", 0x1B, 0xC0+temp, key);
                            temp++;
                        }
                        break;
                }


        }
    }
};

